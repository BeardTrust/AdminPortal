<div class='container-fluid'>
    <h1 class="text-center mb-2">View All Users</h1>
    <h3><td><button type="button" class="btn btn-primary btn-lg" style="background-color:green" (click)="open(updateUserModal, null)">Create</button></td></h3>
    <table class='table table-striped table-hover table-active border border-secondary shadow-lg'>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let u of users; let i=index">
                <td>{{ i+1 }}</td>
                <td>{{ u.$firstName }}</td>
                <td>{{ u.$lastName }}</td>
                <td><button type="button" class="btn btn-secondary" (click)="open(updateUserModal, u)">Edit</button></td>
                <td><button type="button" class="btn btn-danger" (click)="deleteUser(u.$userId)">Delete</button></td>
            </tr>
        </tbody>
    </table>
</div>

<ng-template #updateUserModal let-c="close" let-d="dismiss">
    <form [formGroup]="updateUserForm" (ngSubmit)="saveUser()">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ modalHeader }}</h5>
                </div>
                <div class="modal-body">
                    <p>User Details</p>
                    <div class="form-group">
                        User ID: <input
                        type="text"
                        id="userId"
                        formControlName="userId"
                        class="mb-2 disabled"/>
                        <br>
                        Username: <input
                        type="text"
                        id="username"
                        formControlName="username"
                        class="mb-2"/>
                        <br>
                        Password: <input
                        type="text"
                        id="password"
                        formControlName="password"
                        class="mb-2"/>
                        <br>
                        Email: <input
                        type="text"
                        id="email"
                        formControlName="email"
                        class="mb-2"/>
                        <br>
                        Phone: <input
                        type="text"
                        id="phone"
                        formControlName="phone"
                        class="mb-2"/>
                        <br>
                        Date of Birth: <input
                        type="text"
                        id="dateOfBirth"
                        formControlName="dateOfBirth"
                        class="mb-2"/>
                        <br>
                        First Name: <input
                        type="text"
                        id="firstName"
                        formControlName="firstName"
                        class="mb-2"/>
                        <br>
                        Last Name: <input
                        type="text"
                        id="lastName"
                        formControlName="lastName"
                        class="mb-2"/>
                        <br>
                        Role: <input
                        type="text"
                        id="role"
                        formControlName="role"/>
                    </div>
                </div>
                <div class="modal-footer">
                    <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                    (click)="closeModal()"
                    >
                    Close
                    </button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </form>
</ng-template>

