<div class='container-fluid'>
    <h1 class="text-center mb-2">View All Accounts</h1>
    <h3><td><button type="button" class="btn btn-primary btn-lg" style="background-color:green" (click)="open(updateAccountModal, null)">Create</button></td></h3>
    <table class='table table-striped table-hover table-active border border-secondary shadow-lg'>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">User ID</th>
                <th scope="col">Account ID</th>
                <th scope="col">Is Active</th>
                <th scope="col">Balance</th>
                <th scope="col">Date Created</th>
                <th scope="col">Interest Rate</th>
                <th scope="col">Nickname</th>
                <th scope="col">Account Type</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let a of sortedAccounts; let i=index">
                <td>{{ i+1 }}</td>
                <td>{{ a.$firstName }}</td>
                <td>{{ a.$lastName }}</td>
                <td>{{ a.$userId }}</td>
                <td>{{ a.$accountId }}</td>
                <td>{{ a.$active_status }}</td>
                <td>${{ a.$balance }}</td>
                <td>{{ a.$create_date }}</td>
                <td>{{ a.$interest }}%</td>
                <td>{{ a.$nickname }}</td>
                <td>{{ a.$type }}</td>
                <td><button type="button" class="btn btn-secondary" (click)="open(updateAccountModal, a)">Edit</button></td>
                <td><button type="button" class="btn btn-danger" (click)="deactivateAccount(a.$accountId)">Delete</button></td>
            </tr>
        </tbody>
    </table>
</div>

<ng-template #updateAccountModal let-c="close" let-d="dismiss">
    <form [formGroup]="updateAccountForm" (ngSubmit)="saveAccount()">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ modalHeader }}</h5>
                </div>
                <div class="modal-body">
                    <p>Account Details</p>
                    <div class="form-group">
                        User ID: <input
                        type="text"
                        id="userId"
                        formControlName="userId"
                        class="mb-2 disabled"
                        required/>
                        <br>
                        Account ID: <input
                        type="text"
                        id="accountId"
                        formControlName="accountId"
                        class="mb-2"
                        required/>
                        <br>
                        Active Status: <input
                        type="checkbox"
                        id="active_status"
                        formControlName="active_status"
                        class="mb-2"/>
                        <br>
                        Balance: <input
                        type="number"
                        id="balance"
                        formControlName="balance"
                        class="mb-2"
                        required/>
                        <br>
                        Creation Date: <input
                        type="date"
                        id="create_date"
                        formControlName="create_date"
                        class="mb-2"
                        required/>
                        <br>
                        Interest Rate: <input
                        type="number"
                        id="interest"
                        formControlName="interest"
                        class="mb-2"
                        required/>
                        <br>
                        Nickname: <input
                        type="text"
                        id="nickname"
                        formControlName="nickname"
                        class="mb-2"/>
                        <br>
                        Account Type: <input
                        type="text"
                        id="type"
                        formControlName="type"
                        class="mb-2"
                        required/>
                    </div>
                </div>
                <div class="modal-footer">
                    <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                    (click)="closeModal()"
                    >
                    Close
                    </button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </form>
</ng-template>